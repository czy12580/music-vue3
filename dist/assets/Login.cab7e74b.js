import{H as b}from"./Header.fe280c9c.js";import{l as y,r as V,c as w}from"./index.6f78a020.js";import{_ as D,x as k,e as S,f as C,g as q,t as U,r as u,o as m,a as g,d as l,j as a,w as n,T as c,p as I,m as N,n as d}from"./index.555d4081.js";const j=""+new URL("vite.4a748afd.svg",import.meta.url).href;const B={components:{Header:b},setup(){k(null);const o=S(),e=C({type:"login",loginData:{phone:"",password:""},registerData:{phone:"",password:"",nickname:"",captcha:""}});q(()=>{});const _=async s=>{if(e.type=="login"){const p=await y(s);p.code===200&&(localStorage.setItem("token",JSON.stringify(p)),o.push("/"))}else await V(s),res.code===200?c.success("\u6CE8\u518C\u6210\u529F"):c.fail(res.message)},r=async()=>{e.registerData.phone&&(await w({phone:e.registerData.phone}),res.code===200&&c.success("\u53D1\u9001\u6210\u529F\uFF0C\u8BF7\u6CE8\u610F\u67E5\u6536\uFF01"))},f=()=>{e.loginData.phone="",e.loginData.password=""},v=s=>{e.type=s};return{...U(e),toggle:v,onSubmit:_,reset:f,sendCaptcha:r}}},L=o=>(I("data-v-b3018791"),o=o(),N(),o),R={class:"bg"},T={class:"main"},H=L(()=>l("div",{class:"logo"},[l("img",{src:j,alt:""})],-1)),$={key:0,class:"login-box",ref:"loginForm"},z={style:{margin:"16px"}},E=d(" \u767B\u5F55 "),F={style:{margin:"16px"}},J=d(" \u91CD\u7F6E "),M={key:1,class:"login-box"},O=d("\u53D1\u9001\u9A8C\u8BC1\u7801"),A={style:{margin:"16px"}},G=d(" \u6CE8\u518C "),K={class:"btn-group"},P=d("\u8FD4\u56DE\u9996\u9875"),Q=d("\u4E8C\u7EF4\u7801\u767B\u5F55");function W(o,e,_,r,f,v){const s=u("van-field"),p=u("van-cell-group"),i=u("van-button"),h=u("van-form");return m(),g("div",R,[l("div",T,[H,o.type=="login"?(m(),g("div",$,[a(h,{onSubmit:r.onSubmit},{default:n(()=>[a(p,{inset:""},{default:n(()=>[a(s,{modelValue:o.loginData.phone,"onUpdate:modelValue":e[0]||(e[0]=t=>o.loginData.phone=t),name:"phone",label:"\u624B\u673A\u53F7",placeholder:"\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"}]},null,8,["modelValue"]),a(s,{modelValue:o.loginData.password,"onUpdate:modelValue":e[1]||(e[1]=t=>o.loginData.password=t),type:"password",name:"password",label:"\u5BC6\u7801",placeholder:"\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801"}]},null,8,["modelValue"])]),_:1}),l("div",z,[a(i,{round:"",block:"",type:"primary","native-type":"submit"},{default:n(()=>[E]),_:1})]),l("div",F,[a(i,{round:"",block:"",type:"primary",onClick:e[2]||(e[2]=t=>r.reset())},{default:n(()=>[J]),_:1})])]),_:1},8,["onSubmit"]),l("a",{href:"javascript:void(0)",onClick:e[3]||(e[3]=t=>r.toggle("resgister"))},"\u7ACB\u5373\u6CE8\u518C")],512)):(m(),g("div",M,[a(h,{onSubmit:r.onSubmit},{default:n(()=>[a(p,{inset:""},{default:n(()=>[a(s,{modelValue:o.registerData.phone,"onUpdate:modelValue":e[5]||(e[5]=t=>o.registerData.phone=t),name:"phone",center:"",label:"\u624B\u673A\u53F7",placeholder:"\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"}]},{button:n(()=>[a(i,{size:"small",type:"primary",onClick:e[4]||(e[4]=t=>r.sendCaptcha())},{default:n(()=>[O]),_:1})]),_:1},8,["modelValue"]),a(s,{modelValue:o.registerData.password,"onUpdate:modelValue":e[6]||(e[6]=t=>o.registerData.password=t),type:"password",name:"password",label:"\u5BC6\u7801",placeholder:"\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801"}]},null,8,["modelValue"]),a(s,{modelValue:o.registerData.nickname,"onUpdate:modelValue":e[7]||(e[7]=t=>o.registerData.nickname=t),name:"nickname",label:"\u6635\u79F0",placeholder:"\u6635\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6635\u79F0"}]},null,8,["modelValue"]),a(s,{modelValue:o.registerData.captcha,"onUpdate:modelValue":e[8]||(e[8]=t=>o.registerData.captcha=t),name:"captcha",label:"\u9A8C\u8BC1\u7801",placeholder:"\u9A8C\u8BC1\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}]},null,8,["modelValue"])]),_:1}),l("div",A,[a(i,{round:"",block:"",type:"primary","native-type":"submit"},{default:n(()=>[G]),_:1})])]),_:1},8,["onSubmit"]),l("a",{href:"javascript:void(0)",onClick:e[9]||(e[9]=t=>r.toggle("login"))},"\u5DF2\u6709\u8D26\u53F7")])),l("div",K,[a(i,{color:"#7232dd",plain:"",to:"home"},{default:n(()=>[P]),_:1}),a(i,{color:"#7232dd",plain:"",to:"rqlogin"},{default:n(()=>[Q]),_:1})])])])}const x=D(B,[["render",W],["__scopeId","data-v-b3018791"]]);export{x as default};
